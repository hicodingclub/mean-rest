<%_ let cate = listCategories[0] || {};
	let { listCategoryField, listCategoryRef, listCategoryShowMore } = cate;
	let cate2 = listCategories[1] || {};
	let { listCategoryField2, listCategoryRef2, listCategoryShowMore2 } = cate2;
%>
<% if (listTitle) {%>
<div class="mt-4 mb-4 d-flex">
	<div class="list-title"><%-listTitle%></div> 
	<div *ngIf="categoryDisplays2.length > 0" class="sort-selection ml-3">
			<div class="dropdown" style="width: 100%;">
				<button class="category2-dropdown btn btn-light btn-sm dropdown-toggle"
					type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					{{categoryDisplays2[selectedCategory2 || 0]}}
				</button>
				<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
					<a *ngFor="let ele of categoryDisplays2; let idx = index;"  class="dropdown-item pointer" (click)="categorySelected2(idx)">{{ele}}</a>
				</div>
			</div>
	</div>

</div><%}%>

<ul *ngIf="listCategory1.listCategoryField" class="nav nav-pills category-nav">
	<li *ngFor="let ele of categoryDisplays; let idx = index;" class="nav-item" >
		<a class="nav-link" [ngClass]="{'active': idx === selectedCategory }" [routerLink]="['.']" [queryParamsHandling]="preserve" (click)="categorySelected(idx)">{{ele}}</a>
	</li>
</ul>
<%_ 
if (listCategoryRef && listCategoryShowMore) {%>
<div *ngFor="let cat of categoryMore; let i = index;" class="ml-3 mb-5">
	<div *ngIf="i === selectedCategory">
		<app-<%-listCategoryRef%>-detail-field [showFieldsStr]="'<%-listCategoryShowMore%>'" [detailObj]="cat"></app-<%-listCategoryRef%>-detail-field>
	</div>
</div> <%}%>

<div>
	<div class="container search"><% if (!disableListSearch) {%>
		<div class="row">
			<div class="col-9">
				<%_ include schema-search.bar.html %>
		    </div>
		</div><%}%>
		<div class="row">
			<div class="col">
		        <div class="action-buttons">
					<%if(api.includes("C") && listActionButtons[0]){%><a [routerLink]="['../new' ]" [skipLocationChange]="false" class="btn btn-outline-primary"><%-listActionButtons[0]%></a><%}%>
					<%if(api.includes("D") && listActionButtons[1]){%><a *ngIf="list.length > 1" routerLink="." class="btn btn-outline-primary" (click)="onDeleteSelected()"
						[ngClass]="{'disabled': !isItemSelected()}"><%-listActionButtons[1]%></a><%}%>
				</div>
			</div>
		</div>
		<hr/>
		<%_ let showRefreshIcon = true;%><% include schema-list.pagination.html %>
	</div>
	<div class="no-records" *ngIf="list.length === 0">
		<span *ngIf="loaded">No records found.</span>
		<span *ngIf="!loaded">Loading...</span>
	</div>
	<div *ngIf="list.length > 0"><%
		let cardCanClick = api.includes('R') && listToDetail === 'click';
		let clickToDetail = api.includes('R') && listToDetail === 'click';
		let cardHasLink = api.includes('R') && listToDetail === 'link';

		let clickToCheck = false;

		let canUpdate = api.includes('U');
		let canDelete = api.includes('D');
		let canCheck = api.includes('D');

		let embeddedEdit = false;

	    let view='list'; 
	for (const viewType of listTypes) {%><%_if (viewType === 'list') {%>
<% include schema-list.view.list.html %><%}%><%_if (viewType === 'grid') {%>
<% include schema-list.view.grid.html %><%}%><%_if (viewType === 'table') {%>
<% include schema-list.view.table.html %><%}%>
	<%_ } %>
	</div>
	<div class="container">
		<%_ showRefreshIcon = false;%><% include schema-list.pagination.html %>
	</div>
	
</div>

<%_ if (schemaHasRef) {%>
<ng-template <%-moduleName%>-ref-select></ng-template><%}%>
